define(["./storage"],function(a){function b(){f||(f=!0,e.create({id:"menu-translate",title:"翻译“%s”",contexts:["selection"],documentUrlPatterns:["http://*/*","https://*/*","file:///*","about:blank"]}))}function c(){f=!1,e.removeAll()}function d(a){chrome.tabs.query({active:!0},function(b){chrome.tabs.sendMessage(b[0].id,{from:"background",to:"content",action:a,data:null})})}var e=chrome.contextMenus,f=!1;a.onChange(function(a){a.showMenu?b():c()},{showMenu:null}),a.get("showMenu").done(function(a){a.showMenu&&b()}),e.onClicked.addListener(function(){d("translate")})});